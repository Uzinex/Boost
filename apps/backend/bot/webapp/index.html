<!DOCTYPE html>
<html lang="ru" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#2563eb" />
    <meta
      name="description"
      content="Uzinex Boost · Telegram WebApp для заработка на заданиях, управления заказами и балансом платформы"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <title>Uzinex Boost WebApp</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles/main.css" />

    <!-- ✅ Конфигурация Boost WebApp -->
    <script id="boost-config" type="application/json">
      {
        "apiBaseUrl": "https://boost-production-602a.up.railway.app/api/v1",
        "botToken": "YOUR_BOT_TOKEN_HERE",
        "mockAuthEnabled": true,
        "mockAuthUser": {
          "telegram_id": 999000000,
          "username": "boost_demo",
          "first_name": "Boost",
          "last_name": "Tester",
          "language_code": "ru"
        }
      }
    </script>
  </head>

  <body>
    <div class="app-shell">
      <header class="app-header">
        <div>
          <h1 class="app-title">Uzinex Boost</h1>
          <p class="app-subtitle">Telegram WebApp · заработок и продвижение</p>
        </div>
        <div class="user-chip" id="user-chip">
          <span class="user-chip__name" id="chip-name">—</span>
          <span class="user-chip__balance" id="chip-balance">0 UZT</span>
        </div>
      </header>

      <nav class="app-nav" aria-label="Основная навигация">
        <button class="nav-btn is-active" data-view="dashboard">Главная</button>
        <button class="nav-btn" data-view="tasks">Задания</button>
        <button class="nav-btn" data-view="orders">Заказы</button>
        <button class="nav-btn" data-view="payments">Пополнения</button>
        <button class="nav-btn" data-view="profile">Профиль</button>
      </nav>

      <main class="app-main">
        <section class="view" id="view-dashboard" data-view="dashboard">
          <div class="grid grid--cards" id="dashboard-cards">
            <article class="card">
              <h2>Баланс</h2>
              <p class="metric" id="metric-balance">—</p>
              <p class="muted">Актуальный баланс в UZT</p>
            </article>
            <article class="card">
              <h2>Заработано</h2>
              <p class="metric" id="metric-earned">—</p>
              <p class="muted">Всего начислено за задания</p>
            </article>
            <article class="card">
              <h2>Заказы</h2>
              <p class="metric" id="metric-orders">—</p>
              <p class="muted">Активные и завершённые кампании</p>
            </article>
            <article class="card">
              <h2>Рефералы</h2>
              <p class="metric" id="metric-referrals">—</p>
              <p class="muted">Приглашённые пользователи</p>
            </article>
          </div>

          <div class="panel">
            <div class="panel__header">
              <h3>Актуальные задания</h3>
              <button class="btn btn--ghost" id="refresh-dashboard-tasks">Обновить</button>
            </div>
            <ul class="list" id="dashboard-tasks"></ul>
            <p class="muted" id="dashboard-tasks-empty">Пока нет активных заданий.</p>
          </div>

          <div class="panel">
            <div class="panel__header">
              <h3>История операций</h3>
              <div class="panel__actions">
                <button class="btn btn--ghost" id="refresh-dashboard-history">Обновить</button>
                <button class="btn btn--ghost" id="open-payments-view" data-view="payments">
                  Все операции
                </button>
              </div>
            </div>
            <div class="timeline" id="dashboard-history"></div>
            <p class="muted" id="dashboard-history-empty">Операций ещё не было.</p>
          </div>
        </section>

        <!-- остальные секции (tasks, orders, payments, profile) без изменений -->
      </main>
    </div>

    <div class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <template id="task-item-template">
      <li class="list__item">
        <div>
          <p class="list__title"></p>
          <p class="list__meta"></p>
        </div>
        <button class="btn btn--small">Выполнить</button>
      </li>
    </template>

    <template id="history-item-template">
      <div class="timeline__item">
        <span class="timeline__time"></span>
        <div class="timeline__content">
          <p class="timeline__title"></p>
          <p class="timeline__meta"></p>
        </div>
      </div>
    </template>

    <template id="referral-item-template">
      <li class="list__item list__item--neutral">
        <div>
          <p class="list__title"></p>
          <p class="list__meta"></p>
        </div>
      </li>
    </template>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
